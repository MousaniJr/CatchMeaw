<!DOCTYPE html>
<html>
<head>
    <title>CathMeaw</title>
      <style>
            body {
                margin: 0;
                padding: 0;
                overflow: hidden; /* Prevents scrollbars */
                background-color: #222; /* Set the background color of the page */
            }

            canvas {
                display: block;
                margin: auto;
                border: 5px solid black; /* Add a 5px black border around the canvas */
                background-color: white; /* Set the background color of the canvas */
                background-image: url('background.jpeg'); /* Replace with the actual image path */
                background-size: cover; /* Adjust how the background image is sized */
            }
        </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script>
        // Set up the game canvas and context
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Define game variables and objects
        let player = {
            x: canvas.width / 2,
            y: canvas.height - 50,
            width: 80,
            height: 50,
            speed: 5
        };

        // Set Borders limit
        const canvasLeftBoundary = 0;
        const canvasRightBoundary = canvas.width - player.width;

        let items = [];
        let score = 0;

        let playerImage = new Image();
        playerImage.src = 'player-right.png'; // Replace with the actual path to the right player image

        // Keydown and Keyup event handlers for player movement
        document.addEventListener('keydown', keyDownHandler);
        document.addEventListener('keyup', keyUpHandler);

        let rightPressed = false;
        let leftPressed = false;

        function keyDownHandler(event) {
            if (event.keyCode === 39) {
                rightPressed = true;
                leftPressed = false;
                playerImage.src = 'player-right.png'; // Replace with the actual path to the right player image
            } else if (event.keyCode === 37) {
                leftPressed = true;
                rightPressed = false;
                playerImage.src = 'player-left.png'; // Replace with the actual path to the left player image
            }
        }

        function keyUpHandler(event) {
            if (event.keyCode === 39) {
                rightPressed = false;
            } else if (event.keyCode === 37) {
                leftPressed = false;
            }
        }

        // Create falling items
        function createItem() {
            let item = {
                x: Math.random() * (canvas.width - 50),
                y: 0,
                width: 50,
                height: 50,
                speed: 3
            };
            items.push(item);
        }

        function moveItems() {
            for (let i = 0; i < items.length; i++) {
                items[i].y += items[i].speed;
            }
        }

        // Collision detection
        function checkCollisions() {
            for (let i = 0; i < items.length; i++) {
                if (
                    player.x < items[i].x + items[i].width &&
                    player.x + player.width > items[i].x &&
                    player.y < items[i].y + items[i].height &&
                    player.y + player.height > items[i].y
                ) {
                    items.splice(i, 1);
                    score++;
                }
            }
        }

        // Update and draw the game
        function updateGame() {

            // Move the player based on the direction
            if (rightPressed && player.x < canvas.width - player.width) {
                player.x += player.speed;
            } else if (leftPressed && player.x > 0) {
                player.x -= player.speed;
            }

            moveItems();
            checkCollisions();

            // Clear the canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw the player image
            ctx.drawImage(playerImage, player.x, player.y, player.width, player.height);

            // Draw the falling items
            for (let i = 0; i < items.length; i++) {
                const itemImage = new Image();
                itemImage.src = 'rat.png'; // Replace with the actual path to your item image
                ctx.drawImage(itemImage, items[i].x, items[i].y, items[i].width, items[i].height);
            }

            // Display the score
            ctx.fillStyle = 'white';
            ctx.fillRect(5, 8, 100, 30);

            // Draw the score
            ctx.fillStyle = 'black';
            ctx.font = '20px Arial';
            ctx.fillText('Score: ' + score, 10, 30);

            requestAnimationFrame(updateGame);
        }

        // Start the game loop
        requestAnimationFrame(updateGame);

        // Generate falling items every 2.5 second
        setInterval(createItem, 2500);
    </script>
</body>
</html>